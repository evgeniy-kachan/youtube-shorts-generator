# üìÅ –†–∞–±–æ—Ç–∞ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é YouTube Shorts Generator —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –≤–∏–¥–µ–æ —Ñ–∞–π–ª–∞–º–∏ (–¥–ª—è —Ä–µ–≥–∏–æ–Ω–æ–≤ –≥–¥–µ YouTube –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω).

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ï—Å–ª–∏ YouTube –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –≤—ã –º–æ–∂–µ—Ç–µ:
1. –°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ –Ω–∞ —Å–≤–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (—á–µ—Ä–µ–∑ VPN)
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ scp
3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ API —Å–µ—Ä–≤–µ—Ä–∞

## üì§ –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ –≤ –ø–∞–ø–∫—É temp/ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
scp /path/to/your/video.mp4 root@SERVER_IP:/opt/youtube-shorts-generator/temp/my_video.mp4
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
scp ~/Downloads/interview.mp4 root@132.45.67.89:/opt/youtube-shorts-generator/temp/interview.mp4
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):

```bash
ssh root@SERVER_IP
ls -lh /opt/youtube-shorts-generator/temp/
```

## üé¨ –®–∞–≥ 2: –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ API

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Swagger UI (—É–¥–æ–±–Ω–æ)

1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://SERVER_IP:8000/docs`

2. –ù–∞–π–¥–∏—Ç–µ endpoint: `POST /api/video/analyze-local`

3. –ù–∞–∂–º–∏—Ç–µ **"Try it out"**

4. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `filename`: `my_video.mp4` (–∏–º—è —Ñ–∞–π–ª–∞ –∏–∑ temp/)

5. –ù–∞–∂–º–∏—Ç–µ **"Execute"**

6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `task_id` –∏–∑ –æ—Ç–≤–µ—Ç–∞

7. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å: `GET /api/video/task/{task_id}`
   - –ü–æ–≤—Ç–æ—Ä—è–π—Ç–µ –∫–∞–∂–¥—ã–µ 10-20 —Å–µ–∫—É–Ω–¥
   - –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ `progress` (0.0 ‚Üí 1.0)
   - –ñ–¥–∏—Ç–µ `status: "completed"`

8. –ö–æ–≥–¥–∞ –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `POST /api/video/process` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–ø–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ curl

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑
curl -X POST "http://SERVER_IP:8000/api/video/analyze-local?filename=my_video.mp4"

# –û—Ç–≤–µ—Ç:
# {"task_id": "xxx-yyy-zzz", "status": "pending", ...}

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
curl http://SERVER_IP:8000/api/video/task/xxx-yyy-zzz

# –ü–æ–≤—Ç–æ—Ä—è—Ç—å –ø–æ–∫–∞ status != "completed"

# 3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–µ–≥–º–µ–Ω—Ç—ã (–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤–∑—è—Ç—å video_id –∏ segment_ids)
curl -X POST http://SERVER_IP:8000/api/video/process \
  -H "Content-Type: application/json" \
  -d '{
    "video_id": "my_video",
    "segment_ids": ["segment_0", "segment_1"],
    "vertical_method": "blur_background"
  }'

# 4. –°–Ω–æ–≤–∞ –∂–¥–∞—Ç—å completion –Ω–æ–≤–æ–≥–æ task_id

# 5. –°–∫–∞—á–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –∫–ª–∏–ø—ã
curl -O http://SERVER_IP:8000/api/video/download/my_video/segment_0
```

### –í–∞—Ä–∏–∞–Ω—Ç C: Python —Å–∫—Ä–∏–ø—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)

```python
import requests
import time

BASE_URL = "http://SERVER_IP:8000"

# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ scp
# scp video.mp4 root@SERVER:/opt/.../temp/my_video.mp4

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑
response = requests.post(f"{BASE_URL}/api/video/analyze-local?filename=my_video.mp4")
task_id = response.json()["task_id"]
print(f"Task ID: {task_id}")

# 3. –ñ–¥–∞—Ç—å completion
while True:
    status = requests.get(f"{BASE_URL}/api/video/task/{task_id}").json()
    print(f"Progress: {status['progress']*100:.0f}% - {status['message']}")
    
    if status["status"] == "completed":
        result = status["result"]
        break
    elif status["status"] == "failed":
        print(f"Error: {status['message']}")
        exit(1)
    
    time.sleep(10)

# 4. –í—ã–±—Ä–∞—Ç—å —Å–µ–≥–º–µ–Ω—Ç—ã
video_id = result["video_id"]
segments = result["segments"]
print(f"\n–ù–∞–π–¥–µ–Ω–æ {len(segments)} —Å–µ–≥–º–µ–Ω—Ç–æ–≤")

# –í—ã–±—Ä–∞—Ç—å —Ç–æ–ø-3
top_segments = sorted(segments, key=lambda x: x['highlight_score'], reverse=True)[:3]
segment_ids = [s['id'] for s in top_segments]

# 5. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å
response = requests.post(f"{BASE_URL}/api/video/process", json={
    "video_id": video_id,
    "segment_ids": segment_ids,
    "vertical_method": "blur_background"
})
process_task_id = response.json()["task_id"]

# 6. –ñ–¥–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
while True:
    status = requests.get(f"{BASE_URL}/api/video/task/{process_task_id}").json()
    if status["status"] == "completed":
        break
    time.sleep(10)

# 7. –°–∫–∞—á–∞—Ç—å –∫–ª–∏–ø—ã
print("\n–°–∫–∞—á–∏–≤–∞–µ–º –∫–ª–∏–ø—ã...")
for segment_id in segment_ids:
    url = f"{BASE_URL}/api/video/download/{video_id}/{segment_id}"
    filename = f"{video_id}_{segment_id}.mp4"
    
    r = requests.get(url)
    with open(filename, 'wb') as f:
        f.write(r.content)
    print(f"–°–∫–∞—á–∞–Ω–æ: {filename}")

print("‚úÖ –ì–æ—Ç–æ–≤–æ!")
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –≤–∏–¥–µ–æ

### ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç:
- –ò–Ω—Ç–µ—Ä–≤—å—é –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- –ü–æ–¥–∫–∞—Å—Ç—ã
- –õ–µ–∫—Ü–∏–∏ –∏ TED Talks
- –û–±–∑–æ—Ä—ã –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
- –ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–Ω—Ç
- –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ

### ‚ùå –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç:
- –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∫–ª–∏–ø—ã (–±–µ–∑ —Ä–µ—á–∏)
- –í–∏–¥–µ–æ –Ω–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö
- –í–∏–¥–µ–æ –±–µ–∑ –∑–≤—É–∫–∞
- –°–ª–∞–π–¥—à–æ—É –±–µ–∑ –æ–∑–≤—É—á–∫–∏

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –µ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç `test_local_video.py`:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/youtube-shorts-generator
source venv/bin/activate

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
python test_local_video.py
```

–û–Ω –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç `temp/test_video.mp4` –∏ –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã.

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Video file not found"

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω:
```bash
ls -lh /opt/youtube-shorts-generator/temp/
```

### –ü—Ä–æ–±–ª–µ–º–∞: "No segments found"

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
- –í–∏–¥–µ–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –º—É–∑—ã–∫—É –≤–º–µ—Å—Ç–æ —Ä–µ—á–∏
- –í–∏–¥–µ–æ –Ω–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ
- –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ –≤–∏–¥–µ–æ (–∏–Ω—Ç–µ—Ä–≤—å—é, –ø–æ–¥–∫–∞—Å—Ç).

### –ü—Ä–æ–±–ª–µ–º–∞: –î–æ–ª–≥–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –¢–∞–π–º–∏–Ω–≥–∏:
- 10 –º–∏–Ω –≤–∏–¥–µ–æ ‚Üí ~5-8 –º–∏–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏
- 30 –º–∏–Ω –≤–∏–¥–µ–æ ‚Üí ~15-20 –º–∏–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏
- 1 —á–∞—Å –≤–∏–¥–µ–æ ‚Üí ~30-40 –º–∏–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üìä –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ —ç—Ç–∞–ø–∞–º

| –≠—Ç–∞–ø | 10 –º–∏–Ω –≤–∏–¥–µ–æ | 30 –º–∏–Ω –≤–∏–¥–µ–æ | 1 —á–∞—Å –≤–∏–¥–µ–æ |
|------|-------------|--------------|-------------|
| –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ | 10 —Å–µ–∫ | 20 —Å–µ–∫ | 30 —Å–µ–∫ |
| –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è (Whisper) | 2-3 –º–∏–Ω | 5-8 –º–∏–Ω | 10-15 –º–∏–Ω |
| –ê–Ω–∞–ª–∏–∑ (LLM) | 1-2 –º–∏–Ω | 3-5 –º–∏–Ω | 7-10 –º–∏–Ω |
| –ü–µ—Ä–µ–≤–æ–¥ (NLLB) | 30 —Å–µ–∫ | 1 –º–∏–Ω | 2 –º–∏–Ω |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ 1 –∫–ª–∏–ø–∞ | 30-40 —Å–µ–∫ | 30-40 —Å–µ–∫ | 30-40 —Å–µ–∫ |

## üí° –°–æ–≤–µ—Ç—ã

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–∏–¥–µ–æ** (5-10 –º–∏–Ω—É—Ç) –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∞—É–¥–∏–æ** - —á–µ–º –ª—É—á—à–µ –∑–≤—É–∫, —Ç–µ–º —Ç–æ—á–Ω–µ–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è
3. **–í—ã–±–∏—Ä–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç —Å —Ä–µ—á—å—é** - –∏–Ω—Ç–µ—Ä–≤—å—é —Ä–∞–±–æ—Ç–∞—é—Ç –ª—É—á—à–µ –≤—Å–µ–≥–æ
4. **–ù–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ** - —Å–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
5. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º** —á–µ—Ä–µ–∑ task status

## üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ, –∏–∑–º–µ–Ω–∏—Ç–µ –≤ `backend/config.py`:

```python
WHISPER_MODEL = "medium"  # –í–º–µ—Å—Ç–æ large-v3 (–≤ 2 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ)
WHISPER_COMPUTE_TYPE = "int8"  # –í–º–µ—Å—Ç–æ float16
```

–ö–∞—á–µ—Å—Ç–≤–æ –±—É–¥–µ—Ç —á—É—Ç—å —Ö—É–∂–µ, –Ω–æ —Å–∫–æ—Ä–æ—Å—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤—ã—à–µ.

