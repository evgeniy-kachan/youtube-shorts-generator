# ๐ฑ ะะพะฝะฒะตััะฐัะธั ะฒ ะฒะตััะธะบะฐะปัะฝัะน ัะพัะผะฐั (9:16)

ะะพะดัะพะฑะฝะพะต ะพะฟะธัะฐะฝะธะต ะบะพะฝะฒะตััะฐัะธะธ ะณะพัะธะทะพะฝัะฐะปัะฝัั YouTube ะฒะธะดะตะพ ะฒ ะฒะตััะธะบะฐะปัะฝัะน ัะพัะผะฐั ะดะปั Reels/Shorts.

## ๐ฏ ะฆะตะปะตะฒะพะน ัะพัะผะฐั

- **ะะฐะทัะตัะตะฝะธะต**: 1080ร1920 ะฟะธะบัะตะปะตะน
- **ะกะพะพัะฝะพัะตะฝะธะต ััะพัะพะฝ**: 9:16
- **ะะพะดะตะบ**: H.264 (libx264)
- **ะะฐัะตััะฒะพ**: CRF 23 (ะฒััะพะบะพะต)

## ๐ ะะตัะพะดั ะบะพะฝะฒะตััะฐัะธะธ

### 1. ะะฐะทะผัััะน ัะพะฝ (blur_background) ๐ ะะตะบะพะผะตะฝะดัะตััั

**ะะฟะธัะฐะฝะธะต:**
- ะกะฐะผัะน ะฟะพะฟัะปััะฝัะน ะผะตัะพะด ะดะปั Shorts/Reels
- ะะธะดะตะพ ะฟะพ ัะตะฝััั ะฒ ะพัะธะณะธะฝะฐะปัะฝะพะผ ัะพะพัะฝะพัะตะฝะธะธ ััะพัะพะฝ
- ะคะพะฝ = ัะฒะตะปะธัะตะฝะฝะฐั ะธ ัะฐะทะผััะฐั ะฒะตััะธั ัะฐะผะพะณะพ ะฒะธะดะตะพ
- ะะตั ะฟะพัะตัะธ ะบะพะฝัะตะฝัะฐ

**ะะธะทัะฐะปัะฝะพ:**
```
โโโโโโโโโโโโโโโโโโโ
โ  โโโโโโโโโโโโโ  โ
โ  โ           โ  โ โ ะะฐะทะผัััะน ัะพะฝ
โ  โ   VIDEO   โ  โ   (ัะฒะตะปะธัะตะฝะฝะพะต ะฒะธะดะตะพ)
โ  โ           โ  โ
โ  โโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโ
    1080ร1920
```

**ะะปััั:**
- ะะตัั ะบะพะฝัะตะฝั ะฒะธะดะตะฝ
- ะัะพัะตััะธะพะฝะฐะปัะฝัะน ะฒะธะด
- ะะพะฟัะปััะฝัะน ััะธะปั ะฒ ัะพััะตััั
- ะัะธะฒะปะตะบะฐะตั ะฒะฝะธะผะฐะฝะธะต

**ะะธะฝััั:**
- ะงััั ะดะพะปััะต ะพะฑัะฐะฑะฐััะฒะฐะตััั

**ะัะฟะพะปัะทัะนัะต ะดะปั:**
- ะะฝัะตัะฒัั
- ะะพะดะบะฐััั
- ะะฑัะฐะทะพะฒะฐัะตะปัะฝัะน ะบะพะฝัะตะฝั
- ะัะฑะพะน ะบะพะฝัะตะฝั ะณะดะต ะฒะฐะถะตะฝ ะฒะตัั ะบะฐะดั

**FFmpeg ะบะพะผะฐะฝะดะฐ:**
```bash
# Background (blurred)
ffmpeg -i input.mp4 \
  -vf "scale=1080:1920:force_original_aspect_ratio=increase,\
       crop=1080:1920,\
       boxblur=luma_radius=20:chroma_radius=20" \
  background.mp4

# Overlay original video
ffmpeg -i background.mp4 -i input.mp4 \
  -filter_complex "[1:v]scale=1080:1920:force_original_aspect_ratio=decrease[fg];\
                   [0:v][fg]overlay=(W-w)/2:(H-h)/2" \
  output.mp4
```

---

### 2. ะะฑัะตะทะบะฐ ะฟะพ ัะตะฝััั (center_crop) โ๏ธ

**ะะฟะธัะฐะฝะธะต:**
- ะัะพััะฐั ะพะฑัะตะทะบะฐ ัะตะฝััะฐะปัะฝะพะน ัะฐััะธ
- ะััััะฐั ะพะฑัะฐะฑะพัะบะฐ
- ะะตะท ัะฐะทะผััะธั

**ะะธะทัะฐะปัะฝะพ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         ะะะะะะะะ            โ
โ  โโโโโโโโโโโโโโโโโโโ        โ
โ  โ                 โ        โ
โ  โ  ะะะะะะะฏ ะงะะกะขะฌ  โ        โ
โ  โ                 โ        โ
โ  โโโโโโโโโโโโโโโโโโโ        โ
โ         ะะะะะะะะ            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        1080ร1920
```

**ะะปััั:**
- ะััััะฐั ะพะฑัะฐะฑะพัะบะฐ
- ะัะพััะพัะฐ
- ะคะพะบัั ะฝะฐ ัะตะฝััะต

**ะะธะฝััั:**
- ะขะตัััััั ะบัะฐั ะบะฐะดัะฐ
- ะะพะถะตั ะพะฑัะตะทะฐัั ะฒะฐะถะฝัะต ัะปะตะผะตะฝัั
- ะะต ะฒัะตะณะดะฐ ะฟะพะดัะพะดะธั

**ะัะฟะพะปัะทัะนัะต ะดะปั:**
- ะะธะดะตะพ ะณะดะต ะดะตะนััะฒะธะต ะฒ ัะตะฝััะต
- ะะตะบัะธะธ (ัะฟะธะบะตั ะฒ ัะตะฝััะต)
- ะัะพััะพะน ะบะพะฝัะตะฝั

**FFmpeg ะบะพะผะฐะฝะดะฐ:**
```bash
ffmpeg -i input.mp4 \
  -vf "scale=-1:1920,crop=1080:1920" \
  output.mp4
```

---

### 3. ะฃะผะฝะฐั ะพะฑัะตะทะบะฐ (smart_crop) ๐ค

**ะะฟะธัะฐะฝะธะต:**
- ะััะฐะตััั ะพะฟัะตะดะตะปะธัั ะฒะฐะถะฝัะต ะพะฑัะตะบัั (ะปะธัะฐ, ะดะฒะธะถะตะฝะธะต)
- ะะฑัะตะทะฐะตั ั ััะตัะพะผ ะบะพะฝัะตะฝัะฐ
- Fallback ะฝะฐ center_crop ะตัะปะธ ะฝะต ัะฐะฑะพัะฐะตั

**ะะธะทัะฐะปัะฝะพ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะะฆะโ โโโโโโโโโโโโโโโโโโโ  โ
โ        โ   [๐ค]          โ  โ
โ        โ                 โ  โ
โ        โ   ะฃะะะะฏ ะะะะะะะ โ  โ
โ        โ   (ัะปะตะดะธั ะทะฐ    โ  โ
โ        โ    ะปะธัะฐะผะธ)      โ  โ
โ        โโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะปััั:**
- ะะฝัะตะปะปะตะบััะฐะปัะฝะฐั ะพะฑัะตะทะบะฐ
- ะกะพััะฐะฝัะตั ะฒะฐะถะฝัะต ัะปะตะผะตะฝัั
- ะฅะพัะพัะพ ะดะปั ะธะฝัะตัะฒัั

**ะะธะฝััั:**
- ะขัะตะฑัะตั ะดะพะฟะพะปะฝะธัะตะปัะฝัั ะฑะธะฑะปะธะพัะตะบ
- ะะพะถะตั ะฝะต ะฒัะตะณะดะฐ ัะฐะฑะพัะฐัั
- ะงััั ะผะตะดะปะตะฝะฝะตะต

**ะัะฟะพะปัะทัะนัะต ะดะปั:**
- ะะฝัะตัะฒัั ั ะปัะดัะผะธ
- ะะธะดะตะพ ั ะปะธัะฐะผะธ
- ะะธะฝะฐะผะธัะตัะบะธะน ะบะพะฝัะตะฝั

**ะขะตะบััะฐั ัะตะฐะปะธะทะฐัะธั:**
ะ ัะตะบััะตะน ะฒะตััะธะธ fallback ะฝะฐ center_crop. ะะปั ะฟะพะปะฝะพัะตะฝะฝะพะน ัะตะฐะปะธะทะฐัะธะธ ะฝัะถะตะฝ OpenCV.

---

## ๐จ ะกัะฐะฒะฝะตะฝะธะต ะผะตัะพะดะพะฒ

| ะะตัะพะด | ะกะบะพัะพััั | ะะฐัะตััะฒะพ | ะะพัะตัั ะบะพะฝัะตะฝัะฐ | ะัะฟะพะปัะทะพะฒะฐะฝะธะต |
|-------|----------|----------|-----------------|---------------|
| **ะะฐะทะผัััะน ัะพะฝ** | ะกัะตะดะฝัั | โญโญโญโญโญ | 0% | ๐ฅ ะะตะบะพะผะตะฝะดัะตััั |
| **ะะฑัะตะทะบะฐ** | ะััััะฐั | โญโญโญ | ~40% | ะัะพััะพะน ะบะพะฝัะตะฝั |
| **ะฃะผะฝะฐั ะพะฑัะตะทะบะฐ** | ะะตะดะปะตะฝะฝะฐั | โญโญโญโญ | ~20% | ะะฝัะตัะฒัั |

## ๐ง ะะฐัััะพะนะบะฐ

### ะ ะบะพะฝัะธะณััะฐัะธะธ (backend/config.py):

```python
VERTICAL_CONVERSION_METHOD = "blur_background"  # ะะพ ัะผะพะปัะฐะฝะธั
TARGET_WIDTH = 1080
TARGET_HEIGHT = 1920
```

### ะงะตัะตะท API:

```python
import requests

requests.post('http://localhost:8000/api/video/process', json={
    'video_id': 'VIDEO_ID',
    'segment_ids': ['segment_0', 'segment_1'],
    'vertical_method': 'blur_background'  # ะธะปะธ center_crop, smart_crop
})
```

### ะงะตัะตะท Web UI:

ะัะฟะฐะดะฐััะธะน ัะฟะธัะพะบ ะฝะฐ ััะฐะฟะต ะฒัะฑะพัะฐ ัะตะณะผะตะฝัะพะฒ:
- ๐ ะะฐะทะผัััะน ัะพะฝ (ัะตะบะพะผะตะฝะดัะตััั)
- โ๏ธ ะะฑัะตะทะบะฐ ะฟะพ ัะตะฝััั
- ๐ค ะฃะผะฝะฐั ะพะฑัะตะทะบะฐ

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

ะะฐ NVIDIA A4000:

| ะะตัะพะด | ะัะตะผั ะดะปั 1 ะผะธะฝััั ะฒะธะดะตะพ |
|-------|-------------------------|
| ะะฐะทะผัััะน ัะพะฝ | ~5-7 ัะตะบัะฝะด |
| ะะฑัะตะทะบะฐ | ~2-3 ัะตะบัะฝะดั |
| ะฃะผะฝะฐั ะพะฑัะตะทะบะฐ | ~8-10 ัะตะบัะฝะด |

## ๐ก ะะตะบะพะผะตะฝะดะฐัะธะธ

### ะะปั ัะฐะทะฝัั ัะธะฟะพะฒ ะบะพะฝัะตะฝัะฐ:

**ะะฝัะตัะฒัั / ะะพะดะบะฐััั:**
```python
vertical_method = "blur_background"  # โ ะัััะธะน ะฒัะฑะพั
```
- ะะตัั ะบะพะฝัะตะฝั ะฒะธะดะตะฝ
- ะัะพัะตััะธะพะฝะฐะปัะฝัะน ะฒะธะด
- ะะพะฟัะปััะฝะพ ะฒ TikTok/Instagram

**ะะฑัะฐะทะพะฒะฐัะตะปัะฝัะน ะบะพะฝัะตะฝั:**
```python
vertical_method = "blur_background"  # โ ะัััะธะน ะฒัะฑะพั
```
- ะะฐะถะฝัะต ัะปะตะผะตะฝัั ะฝะฐ ัะบัะฐะฝะต
- ะัะตะทะตะฝัะฐัะธะธ/ะดะธะฐะณัะฐะผะผั ะฒะธะดะฝั ะฟะพะปะฝะพัััั

**ะะตััะฟะปะตะธ / ะะตะนะผะฟะปะตะน:**
```python
vertical_method = "center_crop"  # โ ะะพะดัะพะดะธั
```
- ะะณัะพะฒะพะต ะดะตะนััะฒะธะต ะพะฑััะฝะพ ะฒ ัะตะฝััะต
- ะััััะฐั ะพะฑัะฐะฑะพัะบะฐ
- ะะธะฝะธะผะฐะปัะฝะฐั ะฟะพัะตัั

**ะะปะพะณะธ / ะะธัะฝัะต ะฒะธะดะตะพ:**
```python
vertical_method = "blur_background"  # โ ะฃะฝะธะฒะตััะฐะปัะฝัะน
```
- ะัะฐัะธะฒะฐั ะบะฐััะธะฝะบะฐ
- ะะพะดัะพะดะธั ะดะปั ะปัะฑะพะณะพ ะบะพะฝัะตะฝัะฐ

## ๐ ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะะปะณะพัะธัะผ "ะะฐะทะผัััะน ัะพะฝ":

1. **ะกะพะทะดะฐัั ัะพะฝ:**
   ```
   scale โ ัะฒะตะปะธัะธัั ะดะพ ะทะฐะฟะพะปะฝะตะฝะธั 1080ร1920
   crop โ ะพะฑัะตะทะฐัั ะดะพ ัะพัะฝัั ัะฐะทะผะตัะพะฒ
   boxblur โ ัะฐะทะผััะธะต (ัะฐะดะธัั 20)
   ```

2. **ะะพะดะณะพัะพะฒะธัั ะฒะธะดะตะพ:**
   ```
   scale โ ัะผะตะฝััะธัั ััะพะฑั ะฒะปะตะทะปะพ ะฒ 1080ร1920
   ```

3. **ะะฐะปะพะถะธัั:**
   ```
   overlay โ ะฒะธะดะตะพ ะฟะพ ัะตะฝััั ัะพะฝะฐ
   position โ (W-w)/2, (H-h)/2
   ```

### ะะฐัะฐะผะตััั ะบะฐัะตััะฒะฐ:

```python
{
    'c:v': 'libx264',      # ะะพะดะตะบ H.264
    'preset': 'medium',    # ะะฐะปะฐะฝั ัะบะพัะพััั/ะบะฐัะตััะฒะพ
    'crf': 23,             # ะะฐัะตััะฒะพ (18-28, ะผะตะฝััะต=ะปัััะต)
    'c:a': 'aac',          # ะัะดะธะพ ะบะพะดะตะบ
    'b:a': '192k'          # ะัะดะธะพ ะฑะธััะตะนั
}
```

## ๐ฏ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### Python ัะบัะธะฟั:

```python
from backend.services.video_processor import VideoProcessor
from pathlib import Path

processor = VideoProcessor(output_dir=Path('./output'))

# ะะฐะทะผัััะน ัะพะฝ
processor.convert_to_vertical(
    video_path='input.mp4',
    output_path='output_blur.mp4',
    method='blur_background'
)

# ะะฑัะตะทะบะฐ
processor.convert_to_vertical(
    video_path='input.mp4',
    output_path='output_crop.mp4',
    method='center_crop'
)
```

### ะงะตัะตะท API:

```bash
# 1. ะะฝะฐะปะธะท
curl -X POST http://localhost:8000/api/video/analyze \
  -H "Content-Type: application/json" \
  -d '{"youtube_url": "https://www.youtube.com/watch?v=VIDEO_ID"}'

# 2. ะะฑัะฐะฑะพัะบะฐ ั blur_background
curl -X POST http://localhost:8000/api/video/process \
  -H "Content-Type: application/json" \
  -d '{
    "video_id": "VIDEO_ID",
    "segment_ids": ["segment_0"],
    "vertical_method": "blur_background"
  }'
```

## ๐ Troubleshooting

### ะัะพะฑะปะตะผะฐ: ะะธะดะตะพ ัะปะธัะบะพะผ ัะธะปัะฝะพ ัะฐะทะผััะพ

**ะะตัะตะฝะธะต:**
ะะทะผะตะฝะธัะต ะฟะฐัะฐะผะตััั blur ะฒ `video_processor.py`:

```python
.filter('boxblur', 'luma_radius=10:chroma_radius=10')  # ะะตะฝััะต ัะฐะทะผััะธะต
```

### ะัะพะฑะปะตะผะฐ: ะะฑัะตะทะบะฐ ัะตะถะตั ะฒะฐะถะฝัะต ัะฐััะธ

**ะะตัะตะฝะธะต:**
ะัะฟะพะปัะทัะนัะต `blur_background` ะฒะผะตััะพ `center_crop`:

```python
vertical_method = "blur_background"
```

### ะัะพะฑะปะตะผะฐ: ะะตะดะปะตะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ

**ะะตัะตะฝะธะต:**
1. ะัะฟะพะปัะทัะนัะต `center_crop` (ัะฐะผัะน ะฑัััััะน)
2. ะะทะผะตะฝะธัะต preset:
   ```python
   'preset': 'fast'  # ะฒะผะตััะพ 'medium'
   ```

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะพ

### ะะฐััะพะผะฝัะต ัะฐะทะผะตัั:

ะัะปะธ ะฝัะถะฝั ะดััะณะธะต ัะฐะทะผะตัั (ะฝะฐะฟัะธะผะตั, ะดะปั Stories):

```python
# ะ backend/config.py
TARGET_WIDTH = 1080   # Stories: 1080
TARGET_HEIGHT = 1920  # Stories: 1920

# ะะปั YouTube Shorts (ัะพ ะถะต ัะฐะผะพะต):
TARGET_WIDTH = 1080
TARGET_HEIGHT = 1920
```

### ะะพะฑะฐะฒะปะตะฝะธะต ะฒะพะดัะฝัั ะทะฝะฐะบะพะฒ:

ะะพะถะฝะพ ะดะพะฑะฐะฒะธัั ะฒ `video_processor.py`:

```python
.filter('drawtext', 
    text='@username',
    x='(w-text_w)/2',
    y='h-th-10',
    fontsize=24,
    fontcolor='white'
)
```

---

**ะะพัะพะฒัะต ะฒะตััะธะบะฐะปัะฝัะต ะบะปะธะฟั ะธะดะตะฐะปัะฝะพ ะฟะพะดัะพะดัั ะดะปั:**
- TikTok
- Instagram Reels
- YouTube Shorts
- Facebook Reels
- Snapchat Spotlight

๐ฌ ะกะพะทะดะฐะฒะฐะนัะต ะฒะธัััะฝัะน ะบะพะฝัะตะฝั!

